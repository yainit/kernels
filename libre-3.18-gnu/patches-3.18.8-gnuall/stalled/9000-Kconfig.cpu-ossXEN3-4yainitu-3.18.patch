diff -uNr linux-3.17.1/arch/x86/Kconfig.cpu linux-3.17.1-oss/arch/x86/Kconfig.cpu
--- linux-3.17.1/arch/x86/Kconfig.cpu	2014-10-05 19:23:04.000000000 +0000
+++ linux-3.17.1-oss/arch/x86/Kconfig.cpu	2014-11-08 21:40:59.652813096 +0000
@@ -6,7 +6,7 @@
 
 config M486
 	bool "486"
-	depends on X86_32
+	depends on X86_32 && !XEN
 	---help---
 	  This is the processor type of your CPU. This information is
 	  used for optimizing purposes. In order to compile a kernel
@@ -171,7 +171,7 @@
 
 config MWINCHIPC6
 	bool "Winchip-C6"
-	depends on X86_32
+	depends on X86_32 && !XEN
 	---help---
 	  Select this for an IDT Winchip C6 chip.  Linux and GCC
 	  treat this chip as a 586TSC with some extended instructions
@@ -179,7 +179,7 @@
 
 config MWINCHIP3D
 	bool "Winchip-2/Winchip-2A/Winchip-3"
-	depends on X86_32
+	depends on X86_32 && !XEN
 	---help---
 	  Select this for an IDT Winchip-2, 2A or 3.  Linux and GCC
 	  treat this chip as a 586TSC with some extended instructions
@@ -190,26 +190,26 @@
 
 config MELAN
 	bool "AMD Elan"
-	depends on X86_32
+	depends on X86_32 && !XEN
 	---help---
 	  Select this for an AMD Elan processor.
 	  Do not use this option for AMD K6/Athlon/Opteron processors!
 
 config MGEODEGX1
 	bool "GeodeGX1"
-	depends on X86_32
+	depends on X86_32 && !XEN
 	---help---
 	  Select this for a Geode GX1 (Cyrix MediaGX) chip.
 
 config MGEODE_LX
 	bool "Geode GX/LX"
-	depends on X86_32
+	depends on X86_32 && !XEN
 	---help---
 	  Select this for AMD Geode GX and LX processors.
 
 config MCYRIXIII
 	bool "CyrixIII/VIA-C3"
-	depends on X86_32
+	depends on X86_32 && !XEN
 	---help---
 	  Select this for a Cyrix III or C3 chip.  Presently Linux and GCC
 	  treat this chip as a generic 586. Whilst the CPU is 686 class,
@@ -378,7 +378,7 @@
 config M586TSC
 	bool "Intel Pentium-Classic"
 	select MHARDFLOAT
-	depends on X86_32
+	depends on X86_32 && !XEN
 	---help---
 
 	  Select this for a Pentium Classic processor with the RDTSC (Read
@@ -389,7 +389,7 @@
 config M586MMX
 	bool "Intel Pentium-MMX"
 	select MMMX3DNOW
-	depends on X86_32
+	depends on X86_32 && !XEN
 	---help---
 
 	  Select this for a Pentium with the MMX graphics/multimedia
@@ -794,6 +794,7 @@
 config X86_TSC
 	def_bool y
 	depends on ((MWINCHIP3D || MCRUSOE || MEFFICEON || MCYRIXIII || MK7 || MK6 || MPRESCOTT || MNOCONA || MPENTIUM4 || MPENTIUMM || MPENTIUMIII || MPENTIUMII || M686 || M586MMX || M586TSC || MK8 || MK8SSE3 || MVIAC3_2 || MVIAC7 || MGEODEGX1 || MGEODE_LX || MCORE2 || MWESTMERE || MNEHALEM || MSANDYBRIDGE || MIVYBRIDGE || MHASWELL || MBROADWELL || MATOM || MBONNELL || MSILVERMONT) && !X86_NUMAQ) || X86_64
+	depends on !XEN
 
 config X86_CMPXCHG64
 	def_bool y
