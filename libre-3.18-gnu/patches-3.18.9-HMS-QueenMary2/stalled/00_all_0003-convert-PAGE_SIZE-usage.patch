From 754b563bb9dd787752618a3b48b2547d0f1e6a4b Mon Sep 17 00:00:00 2001
From: Mike Frysinger <vapier@gentoo.org>
Date: Sat, 13 Feb 2010 03:09:23 -0500
Subject: [PATCH] convert PAGE_SIZE usage

The size of a page may change at runtime or based on kernel settings, so
a static value at compile time doesn't work.  More importantly, no one
exports PAGE_SIZE to user space anymore.

URL: http://bugs.gentoo.org/301431
Signed-off-by: Mike Frysinger <vapier@gentoo.org>
---
 include/uapi/linux/binfmts.h  | 3 ++-
 include/uapi/linux/resource.h | 3 ++-
 2 files changed, 4 insertions(+), 2 deletions(-)

diff --git a/include/uapi/linux/resource.h b/include/uapi/linux/resource.h
index 36fb3b5..58efd07 100644
--- a/include/uapi/linux/resource.h
+++ b/include/uapi/linux/resource.h
@@ -68,7 +68,8 @@ struct rlimit64 {
  * GPG2 wants 64kB of mlocked memory, to make sure pass phrases
  * and other sensitive information are never written to disk.
  */
-#define MLOCK_LIMIT	((PAGE_SIZE > 64*1024) ? PAGE_SIZE : 64*1024)
+/* No one currently defines PAGE_SIZE bigger than 64kB */
+#define MLOCK_LIMIT	(64 * 1024)
 
 /*
  * Due to binary compatibility, the actual resource numbers
-- 
2.1.2

