diff -uNr a/ubuntu/aufs/Kconfig b/ubuntu/aufs/Kconfig
--- a/ubuntu/aufs/Kconfig	2014-11-23 20:19:19.011862219 +0000
+++ b/ubuntu/aufs/Kconfig	2014-11-23 17:35:26.927175889 +0000
@@ -1,5 +1,6 @@
 config AUFS_FS
 	tristate "Aufs (Advanced multi layered unification filesystem) support"
+       depends on ( UNION_FS = m || !UNION_FS)
 	help
 	Aufs is a stackable unification filesystem such as Unionfs,
 	which unifies several directories and provides a merged single
diff -uNr a/fs/unionfs/Kconfig b/fs/unionfs/Kconfig
--- a/fs/unionfs/Kconfig	2014-11-23 20:19:18.980862217 +0000
+++ b/fs/unionfs/Kconfig	2014-11-23 17:35:26.968175892 +0000
@@ -1,5 +1,6 @@
 config UNION_FS
 	tristate "Union file system"
+	depends on (AUFS_FS=m || !AUFS_FS)
 	help
 	  Unionfs is a stackable unification file system, which appears to
 	  merge the contents of several directories (branches), while keeping
@@ -9,7 +10,7 @@
 
 config UNION_FS_XATTR
 	bool "Unionfs extended attributes"
-	depends on UNION_FS
+	depends on UNION_FS && (CONFIG_AUFS_FS = m || !CONFIG_AUFS_FS )
 	help
 	  Extended attributes are name:value pairs associated with inodes by
 	  the kernel or by users (see the attr(5) manual page).
